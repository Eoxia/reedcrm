window.reedcrm||(window.reedcrm={},window.reedcrm.scriptsLoaded=!1),window.reedcrm.scriptsLoaded||(window.reedcrm.init=function(){window.reedcrm.load_list_script()},window.reedcrm.load_list_script=function(){if(!window.reedcrm.scriptsLoaded){let e=void 0,r=void 0;for(e in window.reedcrm)for(r in window.reedcrm[e].init&&window.reedcrm[e].init(),window.reedcrm[e])window.reedcrm[e]&&window.reedcrm[e][r]&&window.reedcrm[e][r].init&&window.reedcrm[e][r].init();window.reedcrm.scriptsLoaded=!0}},window.reedcrm.refresh=function(){let e=void 0,r=void 0;for(e in window.reedcrm)for(r in window.reedcrm[e].refresh&&window.reedcrm[e].refresh(),window.reedcrm[e])window.reedcrm[e]&&window.reedcrm[e][r]&&window.reedcrm[e][r].refresh&&window.reedcrm[e][r].refresh()},$(document).ready(window.reedcrm.init)),window.reedcrm.address={},window.reedcrm.address.init=function(){window.reedcrm.address.event()},window.reedcrm.address.event=function(){$(document).on("click",'[name="favorite_address"]',window.reedcrm.address.toggleAddressFavorite)},window.reedcrm.address.toggleAddressFavorite=function(){var e=$(this).attr("value");let r=$(this);var i=window.saturne.toolbox.getToken();let n="?";document.URL.match(/\?/)&&(n="&"),$.ajax({url:document.URL+n+"action=toggle_favorite&contact_id="+e+"&token="+i,type:"POST",processData:!1,contentType:!1,success:function(){var e=$(".fas.fa-star");r.hasClass("far")&&(r.removeClass("far"),r.addClass("fas")),e.removeClass("fas").addClass("far")},error:function(){}})},window.reedcrm.quickcreation={},window.reedcrm.quickcreation.latitude=null,window.reedcrm.quickcreation.longitude=null,window.reedcrm.quickcreation.init=function(){window.reedcrm.quickcreation.event()},window.reedcrm.quickcreation.event=function(){$(document).on("change","#upload-image",window.saturne.media.uploadImage),$(document).on("click",".image-validate",window.reedcrm.quickcreation.createImg),window.reedcrm.quickcreation.getCurrentPosition(),$(document).on("submit",".quickcreation-form",window.reedcrm.quickcreation.vibratePhone),$(document).on("input","#opp_percent",window.reedcrm.quickcreation.showOppPercentValue)},window.reedcrm.quickcreation.createImg=function(){var e=$(this).closest(".wpeo-modal").find("canvas")[0].toDataURL("image/jpeg"),r=window.saturne.toolbox.getToken(),i=window.saturne.toolbox.getQuerySeparator(document.URL),i=document.URL+i+"action=add_img&token="+r;$.ajax({url:i,type:"POST",processData:!1,contentType:"application/octet-stream",data:JSON.stringify({img:e}),success:function(e){$(".wpeo-modal").removeClass("modal-active"),$("#id-container .linked-medias-list").replaceWith($(e).find("#id-container .linked-medias-list"))},error:function(){}})},window.reedcrm.quickcreation.getCurrentPosition=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){window.reedcrm.quickcreation.latitude=e.coords.latitude,window.reedcrm.quickcreation.longitude=e.coords.longitude,$("#id-container #latitude").val(window.reedcrm.quickcreation.latitude),$("#id-container #longitude").val(window.reedcrm.quickcreation.longitude)},function(e){switch(e.code){case e.PERMISSION_DENIED:$("#id-container #geolocation-error").val("User denied the request for geolocation.");break;case e.POSITION_UNAVAILABLE:$("#id-container #geolocation-error").val("Location information is unavailable.");break;case e.TIMEOUT:$("#id-container #geolocation-error").val("The request to get user location timed out.");break;case e.UNKNOWN_ERROR:$("#id-container #geolocation-error").val("An unknown error occurred.")}}):$("#id-container #geolocation-error").val("Geolocation is not supported by this browser.")},window.reedcrm.quickcreation.vibratePhone=function(){"vibrate"in navigator&&navigator.vibrate([1e3,500,200,200,500,1e3]),window.saturne.loader.display($(".page-footer button"))},window.reedcrm.quickcreation.showOppPercentValue=function(){$(".opp_percent-value").text($("#opp_percent").val()+" %")},window.reedcrm.quickevent={},window.reedcrm.quickevent.init=function(){window.reedcrm.quickevent.event()},window.reedcrm.quickevent.event=function(){$(document).on("keyup","#label",window.reedcrm.quickevent.labelKeyUp)},window.reedcrm.quickevent.labelKeyUp=function(){$("#label").val().length>=.7*parseInt($("#label").attr("maxlength"))?$(".quickevent-label-warning-notice").removeClass("hidden"):$(".quickevent-label-warning-notice").addClass("hidden")};