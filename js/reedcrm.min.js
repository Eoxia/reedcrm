window.reedcrm||(window.reedcrm={},window.reedcrm.scriptsLoaded=!1),window.reedcrm.scriptsLoaded||(window.reedcrm.init=function(){window.reedcrm.load_list_script()},window.reedcrm.load_list_script=function(){if(!window.reedcrm.scriptsLoaded){let e=void 0,n=void 0;for(e in window.reedcrm)for(n in window.reedcrm[e].init&&window.reedcrm[e].init(),window.reedcrm[e])window.reedcrm[e]&&window.reedcrm[e][n]&&window.reedcrm[e][n].init&&window.reedcrm[e][n].init();window.reedcrm.scriptsLoaded=!0}},window.reedcrm.refresh=function(){let e=void 0,n=void 0;for(e in window.reedcrm)for(n in window.reedcrm[e].refresh&&window.reedcrm[e].refresh(),window.reedcrm[e])window.reedcrm[e]&&window.reedcrm[e][n]&&window.reedcrm[e][n].refresh&&window.reedcrm[e][n].refresh()},$(document).ready(window.reedcrm.init)),window.reedcrm.address={},window.reedcrm.address.init=function(){window.reedcrm.address.event()},window.reedcrm.address.event=function(){$(document).on("click",'[name="favorite_address"]',window.reedcrm.address.toggleAddressFavorite)},window.reedcrm.address.toggleAddressFavorite=function(){var e=$(this).attr("value");let n=$(this);var t=window.saturne.toolbox.getToken();let i="?";document.URL.match(/\?/)&&(i="&"),$.ajax({url:document.URL+i+"action=toggle_favorite&contact_id="+e+"&token="+t,type:"POST",processData:!1,contentType:!1,success:function(){var e=$(".fas.fa-star");n.hasClass("far")&&(n.removeClass("far"),n.addClass("fas")),e.removeClass("fas").addClass("far")},error:function(){}})},window.reedcrm||(window.reedcrm={}),window.reedcrm.callnotifications={},window.reedcrm.callnotifications.init=function(){console.log("ReedCRM Call Notifications initialized"),window.reedcrm.callnotifications.config(),window.reedcrm.callnotifications.start()},window.reedcrm.callnotifications.config=function(){var e=document.getElementById("reedcrm-call-config");e?(window.reedcrm.callnotifications.frequency=parseInt(e.dataset.frequency)||60,window.reedcrm.callnotifications.autoOpen=parseInt(e.dataset.autoOpen)||0,window.reedcrm.callnotifications.openNewTab=parseInt(e.dataset.openNewTab)||1,window.reedcrm.callnotifications.checkUrl=e.dataset.checkUrl||"",window.reedcrm.callnotifications.trans={incomingCall:e.dataset.transIncomingCall||"Incoming Call",from:e.dataset.transFrom||"From",phone:e.dataset.transPhone||"Phone",email:e.dataset.transEmail||"Email",viewContact:e.dataset.transViewContact||"View Contact"}):(window.reedcrm.callnotifications.frequency=60,window.reedcrm.callnotifications.autoOpen=0,window.reedcrm.callnotifications.openNewTab=1,window.reedcrm.callnotifications.checkUrl="",window.reedcrm.callnotifications.trans={incomingCall:"Incoming Call",from:"From",phone:"Phone",email:"Email",viewContact:"View Contact"}),window.reedcrm.callnotifications.enabled=!0,window.reedcrm.callnotifications.interval=null},window.reedcrm.callnotifications.start=function(){window.reedcrm.callnotifications.checkUrl?setTimeout(function(){console.log("Starting ReedCRM call check with frequency: "+window.reedcrm.callnotifications.frequency+"s"),window.reedcrm.callnotifications.check(),window.reedcrm.callnotifications.interval=setInterval(window.reedcrm.callnotifications.check,1e3*window.reedcrm.callnotifications.frequency)},3e3):console.error("ReedCRM: No check URL configured for call notifications")},window.reedcrm.callnotifications.check=function(){window.reedcrm.callnotifications.enabled&&jQuery.ajax({url:window.reedcrm.callnotifications.checkUrl,type:"GET",dataType:"json",success:function(e){e&&0<e.length&&(console.log("Found "+e.length+" new call events"),jQuery.each(e,function(e,n){window.reedcrm.callnotifications.show(n)}))},error:function(e,n,t){console.error("Error checking call events:",t)}})},window.reedcrm.callnotifications.show=function(n){console.log("Showing call notification:",n);var e=window.reedcrm.callnotifications.trans,t="<strong>"+e.incomingCall+"</strong> : "+n.contact_name;n.caller&&(t+="<br>"+e.from+": "+n.caller),n.contact_phone&&(t+="<br>"+e.phone+": "+n.contact_phone),n.contact_email&&(t+="<br>"+e.email+": "+n.contact_email),t=t+'<br><br><button type="button" class="button" onclick="window.open(\''+n.url+"', '_blank')\">"+e.viewContact+"</button>",jQuery.jnotify(t,"success",!0,{sticky:!0,timeout:3e4}),window.reedcrm.callnotifications.autoOpen&&setTimeout(function(){var e=window.reedcrm.callnotifications.openNewTab?"_blank":"_self";window.open(n.url,e)},1e3)},window.reedcrm.callnotifications.enable=function(){window.reedcrm.callnotifications.enabled=!0,window.reedcrm.callnotifications.check(),window.reedcrm.callnotifications.interval=setInterval(window.reedcrm.callnotifications.check,1e3*window.reedcrm.callnotifications.frequency),console.log("ReedCRM call notifications enabled")},window.reedcrm.callnotifications.disable=function(){window.reedcrm.callnotifications.enabled=!1,window.reedcrm.callnotifications.interval&&clearInterval(window.reedcrm.callnotifications.interval),console.log("ReedCRM call notifications disabled")},jQuery(document).ready(function(){window.reedcrm.callnotifications.init()}),window.reedcrm.quickcreation={},window.reedcrm.quickcreation.latitude=null,window.reedcrm.quickcreation.longitude=null,window.reedcrm.quickcreation.init=function(){window.reedcrm.quickcreation.event()},window.reedcrm.quickcreation.event=function(){$(document).on("change","#upload-image",window.saturne.media.uploadImage),$(document).on("click",".image-validate",window.reedcrm.quickcreation.createImg),window.reedcrm.quickcreation.getCurrentPosition(),$(document).on("submit",".quickcreation-form",window.reedcrm.quickcreation.vibratePhone),$(document).on("input","#opp_percent",window.reedcrm.quickcreation.showOppPercentValue)},window.reedcrm.quickcreation.createImg=function(){var e=$(this).closest(".wpeo-modal").find("canvas")[0].toDataURL("image/jpeg"),n=window.saturne.toolbox.getToken(),t=window.saturne.toolbox.getQuerySeparator(document.URL),t=document.URL+t+"action=add_img&token="+n;$.ajax({url:t,type:"POST",processData:!1,contentType:"application/octet-stream",data:JSON.stringify({img:e}),success:function(e){$(".wpeo-modal").removeClass("modal-active"),$("#id-container .linked-medias-list").replaceWith($(e).find("#id-container .linked-medias-list"))},error:function(){}})},window.reedcrm.quickcreation.getCurrentPosition=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){window.reedcrm.quickcreation.latitude=e.coords.latitude,window.reedcrm.quickcreation.longitude=e.coords.longitude,$("#id-container #latitude").val(window.reedcrm.quickcreation.latitude),$("#id-container #longitude").val(window.reedcrm.quickcreation.longitude)},function(e){switch(e.code){case e.PERMISSION_DENIED:$("#id-container #geolocation-error").val("User denied the request for geolocation.");break;case e.POSITION_UNAVAILABLE:$("#id-container #geolocation-error").val("Location information is unavailable.");break;case e.TIMEOUT:$("#id-container #geolocation-error").val("The request to get user location timed out.");break;case e.UNKNOWN_ERROR:$("#id-container #geolocation-error").val("An unknown error occurred.")}}):$("#id-container #geolocation-error").val("Geolocation is not supported by this browser.")},window.reedcrm.quickcreation.vibratePhone=function(){"vibrate"in navigator&&navigator.vibrate([1e3,500,200,200,500,1e3]),window.saturne.loader.display($(".page-footer button"))},window.reedcrm.quickcreation.showOppPercentValue=function(){$(".opp_percent-value").text($("#opp_percent").val()+" %")},window.reedcrm.quickevent={},window.reedcrm.quickevent.init=function(){window.reedcrm.quickevent.event()},window.reedcrm.quickevent.event=function(){$(document).on("keyup","#label",window.reedcrm.quickevent.labelKeyUp)},window.reedcrm.quickevent.labelKeyUp=function(){$("#label").val().length>=.7*parseInt($("#label").attr("maxlength"))?$(".quickevent-label-warning-notice").removeClass("hidden"):$(".quickevent-label-warning-notice").addClass("hidden")},window.reedcrm.stats={},window.reedcrm.stats.init=function(){window.reedcrm.stats.event()},window.reedcrm.stats.event=function(){var e="true"===jQuery("#filters-header").data("has-filters");jQuery("#filters-header").click(function(){jQuery(".reedcrm-stats-filters").toggle(),jQuery(this).toggleClass("collapsed")}),"true"!==e&&(jQuery(".reedcrm-stats-filters").hide(),jQuery("#filters-header").addClass("collapsed")),jQuery(document).off("click","#apply-salesfunnel-filter-btn").on("click","#apply-salesfunnel-filter-btn",function(){var e=jQuery("select[name='salesfunnel_date_startday']").val()||"",n=jQuery("select[name='salesfunnel_date_startmonth']").val()||"",t=jQuery("select[name='salesfunnel_date_startyear']").val()||"",i=jQuery("select[name='salesfunnel_date_endday']").val()||"",o=jQuery("select[name='salesfunnel_date_endmonth']").val()||"",r=jQuery("select[name='salesfunnel_date_endyear']").val()||"",a=jQuery("#dashBoardForm");function c(e,n,t){var i=e.find("input[name='"+n+"']");""===t||null===t?i.remove():(i.length||(i=jQuery("<input>",{type:"hidden",name:n}),e.append(i)),i.val(t))}(a=(a=a.length?a:jQuery("#statsform").first()).length?a:jQuery("form.dashboard").first()).length?(c(a,"salesfunnel_date_startday",e),c(a,"salesfunnel_date_startmonth",n),c(a,"salesfunnel_date_startyear",t),c(a,"salesfunnel_date_endday",i),c(a,"salesfunnel_date_endmonth",o),c(a,"salesfunnel_date_endyear",r),c(a,"apply_salesfunnel_filter",1),a.submit()):((a=new URLSearchParams(window.location.search)).delete("salesfunnel_date_startday"),a.delete("salesfunnel_date_startmonth"),a.delete("salesfunnel_date_startyear"),a.delete("salesfunnel_date_endday"),a.delete("salesfunnel_date_endmonth"),a.delete("salesfunnel_date_endyear"),e&&n&&t&&(a.set("salesfunnel_date_startday",e),a.set("salesfunnel_date_startmonth",n),a.set("salesfunnel_date_startyear",t)),i&&o&&r&&(a.set("salesfunnel_date_endday",i),a.set("salesfunnel_date_endmonth",o),a.set("salesfunnel_date_endyear",r)),window.location.href=window.location.pathname+"?"+a.toString())})};